---
layout: post
title:  "How to ignore stylecop (SuppressMessage)"
date:   2016-04-20 23:20 +0800
categories: Tools
---

今天在 code review 發現有段 code 的文件註解是 `//<auto-generated>`，乍看下誤以為是系統自動產生的 code，但其實是用來跳脫 stylecop 驗證的一種技巧， 在 [stack overflow][1] 也有這樣的解答，不過覺得這實在文不對題阿，明明就是個手刻得 code... 如果想要忽略 stylecop 的驗證，可以在 class, property, method 套上 SuppressMessage attribute 如下：

{% highlight csharp %}

[SuppressMessage("Microsoft.StyleCop.CSharp.OrderingRules", "SA1202:ElementsMustBeOrderedByAccess")] 
[SuppressMessage("Microsoft.StyleCop.CSharp.NamingRules", "SA1300:ElementMustBeginWithUpperCaseLetter")]
public class MyClass 
{ 
    public int id { get; set; } 
    public string name { get; set; } 
}

{% endhighlight %}


### [SuppressMessageAttribute 類別 (msdn)][2] 
> 隱藏對特定靜態分析工具規則違規的回報，並允許多重隱藏一個單一程式碼成品。

#### 設定方式： 

- 第一個參數指明靜態分析工具，stylecop rules 
- 第二個參數指明規則編號與規則名稱 另外還有多個屬性可以設定，像是設定 Justification 等，可以參考 msdn 官方文件。  

要忽略哪類型的 stylecop 可以從 vs tool 的 error list 中看到，  各式的 rule 是屬於哪類型的 sylecop rules，可以到官方文件查找 [StyleCop rules][3]，
如果像我一樣看英文文件稍微吃力，可以參考 91 哥和保哥的文章，都有詳細的 stylecop 解說。 

#### Reference: 
- [91 - [Tool]程式碼風格分析－StyleCop](https://dotblogs.com.tw/hatelove/2011/12/22/introducing-stylecop) 
- [保哥 - 保哥線上講堂：利用 StyleCop 撰寫一致的 C# 程式碼風格](http://www.slideshare.net/WillHuangTW/stylecop) 
- [How to suppress a StyleCop warning?](http://stackoverflow.com/questions/3287656/how-to-suppress-a-stylecop-warning) 
- [Disable StyleCop for specific lines](http://stackoverflow.com/questions/1754919/disable-stylecop-for-specific-lines) 
- [Style Cop 官方](http://stylecop.codeplex.com/)

[1]: http://stackoverflow.com/questions/16841791/how-can-you-force-stylecop-to-ignore-a-file "how-can-you-force-stylecop-to-ignore-a-file"
[2]: https://msdn.microsoft.com/zh-tw/library/system.diagnostics.codeanalysis.suppressmessageattribute(v=vs.110).aspx "Suppress Message Attribute"
[3]: http://stylecop.soyuz5.com/StyleCop%20Rules.html "StyleCop Rules"